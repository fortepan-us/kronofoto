{% extends "archive/base.html" %}
{% load static %}
{% load timeline %}
{% load thumbnails %}
{% load photometadata %}

{% block content %}
  <main>
    <article class="fi-image">
      <figure>
        <img id="fi-image" src="{% static photo.h700.url %}" alt="Alt text for the image">
      </figure>
      <div id="fi-image-controls">
      <a
{% if photo.next %}
    href="{% url 'photoview' photo.next.page.number photo.next.accession_number %}?{{ getparams }}"
{% endif %}
>
        <img id="fi-arrow-right" 
{% if photo.next %}
        data-json-href="{% url 'photoview-json' photo.next.page.number photo.next.accession_number %}?{{ getparams }}" 
{% endif %}
        
        src="{% static "assets/images/09-advancearrow.svg" %}" alt="Arrow pointing right"></a>
      </div>
      <button id="expand" onclick="toggleVis()">+</button>
      <div id="metadata" class="hidden">
        {% photo_metadata photo %}
      </div>
    </article>
    <nav class="fi-timeline">
      <div class="fi-thumbnail-carousel">
        <div class="back-arrows">
{% if page.has_previous %}
    <a id="backward" data-json-href="{% url 'photoview-json' page.previous_page_number prev_page.0.accession_number %}?{{ getparams }}" href="{% url 'photoview' page.previous_page_number prev_page.0.accession_number %}?{{ getparams }}">
{% endif %}
        &#10092;&#10092;
{% if page.has_previous %}
    </a>
{% endif %}
        </div>
        <div class="slide-container">
        <ul id="fi-preload-zone">
        </ul>
        <ul id="fi-thumbnail-carousel-images">
            {% make_thumbnails page prev_page next_page getparams %}
        </ul>
        </div>
        <div class="forward-arrows">
{% if page.has_next %}
    <a id="forward" href="{% url 'photoview' page.next_page_number next_page.0.accession_number %}?{{ getparams }}" data-json-href="{% url 'photoview-json' page.next_page_number next_page.0.accession_number %}?{{ getparams }}">
{% endif %}
        &#10093;&#10093;
{% if page.has_next %}
    </a>
{% endif %}
        </div>
      </div>
      <div class="year-ticker">
        <div class="year-min">&#10092; 1890</div>
        {% make_timeline years %}
        <div class="year-max">2000&#10093;</div>
      </div>
    </nav>
  </main>
  {{ initialstate | json_script:"initial-state" }}
  <script src="{% static "assets/js/junk.js" %}">
  </script>
{% endblock %}
