{% load static %}
{% load widgets %}
{% load krono_urls %}

<a href="#" class="photo-menu-popup__close-btn"></a>
<div class="photo-menu-popup__wrapper">
        <div class="photo-menu-popup__title">Info</div>

        <div class="metadata-1a" hx-target="#app" hx-headers="{}" hx-swap="innerHTML">
          <ul>
            <li>{{ photo.year }}{% if photo.circa %}c{% endif %}, {{ photo.location }}{% if edit_url %} <a href="{{ edit_url }}">[ Edit ]</a>{% endif %}</li>
            <li>ID#: {{photo.accession_number}}</li>
	    <li>Contributed by <a hx-get="{% object_url photo.donor url_kwargs %}" href="{% object_url photo.donor url_kwargs %}">{{ photo.donor.display_format }}</a></li>
          </ul>
        </div>
        <div class="metadata-3a" hx-target="#app" hx-headers="{}" hx-swap="innerHTML">
          <ul>
            <li><span class="field-name">Tags:</span><br>
            {% if tags %}
                {% for tag in tags %}{% if not forloop.first %},{% endif %}
		<a href="{% object_url tag url_kwargs %}" hx-get="{% object_url tag url_kwargs %}">{{ tag }}</a>{% endfor %}
            {% endif %}
            {% if photo.terms.exists %}
            {% if tags %}, {% endif %}
            {% for term in photo.terms.all %}{% if not forloop.first %},{% endif %}
                <a hx-get="{% object_url term url_kwargs %}" href="{% object_url term url_kwargs %}">{{ term }}</a>{% endfor %}
            {% endif %}
            {% if not tags and not photo.terms.exists %}
                None
            {% endif %}
            </li>
            <li>add a new tag:<br>
                <input /><br>
                <button id="add-tag-button-in-metadata-popup">add</button>
{% comment %}             <a class="add-tag" href="{% krono_url "kronofoto:addtag" url_kwargs photo=photo.id %}">ï¼‹</a>
{% endcomment %}            </li>

            <li><span class="field-name">Comments:</span>{{ photo.caption | markdown }}</li>
            {% comment  %} <li><a href="{% krono_url "kronofoto:add-to-list" url_kwargs photo=photo.id %}">Add to list</a></li> {% endcomment %}
            {% if photo.notices %}<li><span class="field-name">Local Context Notices:</span>
            {% for notice in photo.notices %}
                <img style="width: 4rem;" src="{{notice.svg_url}}" title="{{notice.name}} {{notice.default_text}}">
            {% endfor %}
            {% endif%}
          </ul>
        </div>

        <div class="metadata-2a" hx-target="#app" hx-headers="{}" hx-swap="innerHTML">
          <ul style="color: #777;">
            {% if photo.photographer %}
            <li>Photographed by {{ photo.photographer }}</li>
            {% endif %}

            {% if photo.scanner %}
            <li>Digitized by {{ photo.scanner.display_format }}</li>
            {% endif %}
            <li>Added to the archive {{ photo.created | date:"DATE_FORMAT" }}</li>
          </ul>
        </div>
</div>
